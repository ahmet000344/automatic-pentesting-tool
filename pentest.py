import requests
import sys
import os
def opdomain():
	hedef_url = input("dosya yolu: ")
	with open(hedef_url, 'r') as fl:
		domain = fl.read().splitlines()
		return domain
		
def findsubdomain():
	for i in domain:
		print(i)
		try:
			os.system("subfinder -silent -d {} >> {}".format(i,"subdomain.txt"))
		
		except:
			pass
	

def open_file():
    target_file = "subdomain.txt"
    with open(target_file, 'r') as f:
        url = f.read().splitlines()
    return url
    
    
    
def status__code():
    for i in url:
        urls = "http://{}".format(i)
        try:
            status = requests.get(urls, verify=False, timeout=20).status_code
            if status == 200:
                with open("status.200.txt", "a") as fl:
                    fl.write(urls + "\n")
            if status == 401:
                with open("status.401.txt", "a") as fl:
                    fl.write(urls)
            if status == 301:
                with open("status.301.txt", "a") as fl:
                    fl.write(urls)
            if status == 400:
                with open("status.400.txt", "a") as fl:
                    fl.write(urls)
            if status == 404:
                with open("status.404.txt", "a") as fl:
                    fl.write(urls)
            if status == 403:
                with open("status.493.txt", "a") as fl:
                    fl.write(urls)
                
        except:
            pass
            
def dizin_bulma():
	try:
		status_200_domain = "status.200.txt"
		with open(status_200_domain, 'r') as fl:
			dizin = fl.read().splitlines()
			for i in dizin:
				os.system("dirsearch -u {} -x 500,401,400,404,403 -o {}".format(i,f"/home/ahmet/Desktop/root/{i[7:]}status.200.dizin.txt"))
	except:
		pass
	
	try:
		
		status_301_domain = "status.301.txt"
		with open(status_301_domain, 'r') as fl:
			dizin = fl.read().splitlines()
			for a in dizin:
				os.system("dirsearch -u {} -x 500,401,400,404,403 -o {}".format(a,"/home/ahmet/Desktop/root/status.301.dizin.txt"))
	except:
		pass
	
	try:
		
		status_401_domain = "status.401.txt"
		with open(status_401_domain, 'r') as fl:
			dizin = fl.read().splitlines()
			for b in dizin:
				os.system("dirsearch -u {} -x 500,401,400,404,403 -o {}".format(b,"/home/ahmet/Desktop/root/status.401.dizin.txt"))
	except:
		pass
		
	try:
		
		status_403_domain = "status.403.txt"
		with open(status_403_domain, 'r') as fl:
			dizin = fl.read().splitlines()
			for c in dizin:
				os.system("dirsearch -u {} -x 500,401,400,404,403 -o {}".format(c,"/home/ahmet/Desktop/root/status.403.dizin.txt"))
	except:
		pass
	
	try:
		
		status_404_domain = "status.404.txt"
		with open(status_404_domain, 'r') as fl:
			dizin = fl.read().splitlines()
			for v in dizin:
				os.system("dirsearch -u {} -x 500,401,400,404,403 -o {}".format(v,f"/home/ahmet/Desktop/root/{v[7:]}status.404.dizin.txt"))
	except:
		pass
		
domain = opdomain()
findsubdomain()
url = open_file()
status__code()
dizin_bulma()

